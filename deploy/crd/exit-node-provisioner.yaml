apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: exitnodeprovisioners.chisel-operator.io
spec:
  group: chisel-operator.io
  names:
    categories: []
    kind: ExitNodeProvisioner
    plural: exitnodeprovisioners
    shortNames: []
    singular: exitnodeprovisioner
  scope: Namespaced
  versions:
  - additionalPrinterColumns: []
    name: v1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for ExitNodeProvisionerSpec via `CustomResource`
        properties:
          spec:
            description: ExitNodeProvisioner is a custom resource that represents a Chisel exit node provisioner on a cloud provider.
            oneOf:
            - required:
              - DigitalOcean
            - required:
              - Linode
            - required:
              - AWS
            - required:
              - Azure
            - required:
              - GCP
            properties:
              AWS:
                properties:
                  auth:
                    description: Reference to a secret containing the AWS access key ID and secret access key, under the `access_key_id` and `secret_access_key` secret keys
                    type: string
                  region:
                    description: Region ID for the AWS region to provision the exit node in See https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html
                    type: string
                  security_group:
                    description: Security group name to use for the exit node, uses the default security group if not specified
                    nullable: true
                    type: string
                  size:
                    default: t2.micro
                    description: Size for the EC2 instance See https://aws.amazon.com/ec2/instance-types/
                    type: string
                required:
                - auth
                - region
                type: object
              Azure:
                properties:
                  admin_username:
                    default: azureuser
                    description: Admin username for the VM. If omitted, defaults to `azureuser`.
                    type: string
                  auth:
                    description: Reference to a secret containing Azure credentials. The secret must contain the `AZURE_CLIENT_ID`, `AZURE_CLIENT_SECRET`, and `AZURE_TENANT_ID` keys.
                    type: string
                  image:
                    properties:
                      offer:
                        default: 0001-com-ubuntu-server-jammy
                        type: string
                      publisher:
                        default: Canonical
                        type: string
                      sku:
                        default: 24_04-lts
                        type: string
                      version:
                        default: latest
                        type: string
                    type: object
                  location:
                    description: Azure location/region (e.g. `eastus`).
                    type: string
                  network_security_group_id:
                    description: Optional Network Security Group to attach to the network interface.
                    nullable: true
                    type: string
                  resource_group:
                    description: Azure resource group that will contain the provisioned resources.
                    type: string
                  ssh_public_key:
                    description: Optional SSH public key to add to the VM.
                    nullable: true
                    type: string
                  subnet_id:
                    description: Subnet resource ID used for the network interface (e.g. `/subscriptions/.../virtualNetworks/.../subnets/default`).
                    type: string
                  subscription_id:
                    description: Azure subscription ID where resources should be created.
                    type: string
                  tags:
                    additionalProperties:
                      type: string
                    default: {}
                    description: Additional tags to attach to all provisioned resources.
                    type: object
                  vm_size:
                    default: Standard_B1s
                    description: VM size to launch â€” defaults to `Standard_B1s`.
                    type: string
                required:
                - auth
                - subscription_id
                - resource_group
                - location
                - subnet_id
                type: object
              DigitalOcean:
                properties:
                  auth:
                    description: Reference to a secret containing the DigitalOcean API token, under the `DIGITALOCEAN_TOKEN` secret key
                    type: string
                  region:
                    default: ''
                    description: Region ID of the DigitalOcean datacenter to provision the exit node in If empty, DigitalOcean will randomly select a region for you, which might not be what you want See https://slugs.do-api.dev/
                    type: string
                  size:
                    default: s-1vcpu-1gb
                    description: Size for the DigitalOcean droplet See https://slugs.do-api.dev/
                    type: string
                  ssh_fingerprints:
                    default: []
                    description: SSH key fingerprints to add to the exit node
                    items:
                      type: string
                    type: array
                required:
                - auth
                type: object
              Linode:
                properties:
                  auth:
                    description: Name of the secret containing the Linode API token, under the `LINODE_TOKEN` secret key
                    type: string
                  region:
                    description: Region ID of the Linode datacenter to provision the exit node in See https://api.linode.com/v4/regions
                    type: string
                  size:
                    default: g6-nanode-1
                    description: Size for the Linode instance See https://api.linode.com/v4/linode/
                    type: string
                required:
                - auth
                - region
                type: object
              GCP:
                properties:
                  auth:
                    description: Reference to the secret containing a Google Cloud service account JSON key under `GCP_SERVICE_ACCOUNT_KEY`.
                    type: string
                  firewall_rule:
                    description: Optional firewall rule name or selfLink whose target tags should be applied to the instance.
                    nullable: true
                    type: string
                  image:
                    default: projects/ubuntu-os-cloud/global/images/family/ubuntu-2404-lts
                    description: Disk image to use.
                    type: string
                  labels:
                    additionalProperties:
                      type: string
                    default: {}
                    description: Labels to apply to the instance.
                    type: object
                  machine_type:
                    default: e2-micro
                    description: Machine type to provision.
                    type: string
                  network:
                    description: Optional fully-qualified network resource (defaults to the project's `default` network).
                    nullable: true
                    type: string
                  project:
                    description: Google Cloud project ID
                    type: string
                  scopes:
                    default:
                    - https://www.googleapis.com/auth/compute
                    description: OAuth scopes to grant to the VM's service account.
                    items:
                      type: string
                    type: array
                  service_account_email:
                    description: Optional service account email override. Defaults to the service account from the secret.
                    nullable: true
                    type: string
                  subnetwork:
                    description: Optional fully-qualified subnetwork resource.
                    nullable: true
                    type: string
                  tags:
                    default: []
                    description: Network tags to apply.
                    items:
                      type: string
                    type: array
                  zone:
                    description: Compute Engine zone (e.g. `us-central1-a`).
                    type: string
                required:
                - auth
                - project
                - zone
                type: object
            type: object
        required:
        - spec
        title: ExitNodeProvisioner
        type: object
    served: true
    storage: true
    subresources: {}
